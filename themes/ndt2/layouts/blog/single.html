{{ define "main" }}
<article>
    <header id="post-header">
        <h1>{{ .Title }}
            {{ if .Params.external_url }}
                &nbsp;
                <a href="{{ .Params.external_url }}" target="_blank" class="external-link" title="Website"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
            {{ end }}
            {{ if .Params.lat }}
                &nbsp;
                <a href="https://www.google.com/maps?ll={{ .Params.lat }},{{ .Params.lng }}&q={{ .Params.lat }},{{ .Params.lng }}&hl=en&t=m&z=15" target="_blank" class="external-link" title="Google Maps"><i class="fa-solid fa-map"></i></a>
                &nbsp;
                <a href="https://www.openstreetmap.org/?mlat={{ .Params.lat }}&mlon={{ .Params.lng }}#map=19/{{ .Params.lat }}/{{ .Params.lng }}" target="_blank" class="external-link" title="OpenStreetMap"><i class="fa-solid fa-globe"></i></a>
            {{ end }}
        </h1>
        <div>
            <!-- Created Date -->
            {{- $pubdate := .PublishDate.Format "January 2, 2006" }}
            Created: 
            <time datetime="{{ .PublishDate }}" title="{{ .PublishDate }}">
                {{ $pubdate }}
            </time>
            <!-- Last Updated Date -->
            {{- if .Lastmod }}
                {{- $lastmod := .Lastmod.Format "January 2, 2006" }}
                {{- if ne $lastmod $pubdate }}
                    <div class="post-info-last-mod">
                        (Updated: 
                        <time datetime="{{ .Lastmod }}" title="{{ .Lastmod }}">
                            {{ $lastmod }}
                        </time>)
                    </div>
                {{- end }}
            {{- end }}
        </div>
    </header>
    <hr>
    {{ .Content }}
    {{ if .Params.tags }}
      <div class="blog-tags">
        {{ range .Params.tags }}
          <a href="{{ $.Site.LanguagePrefix | absURL }}/tags/{{ . | urlize }}/">{{ . }}</a>&nbsp;
        {{ end }}
      </div>
    {{ end }}
    {{ if $.Param "socialShare" }}
        <hr/>
        <section id="social-share">
          <div class="list-inline footer-links">
            {{ partial "share-links" . }}
          </div>
        </section>
    {{ end }}
    {{ if .Site.Params.showRelatedPosts }}
      {{ range first 1 (where (where .Site.Pages ".Params.tags" "intersect" .Params.tags) "Permalink" "!=" .Permalink) }}
        {{ $.Scratch.Set "has_related" true }}
      {{ end }}
      {{ if $.Scratch.Get "has_related" }}
        <h4 class="see-also">{{ i18n "seeAlso" }}</h4>
        <ul>
          {{ $num_to_show := .Site.Params.related_content_limit | default 5 }}
          {{ range first $num_to_show (where (where .Site.Pages ".Params.tags" "intersect" .Params.tags) "Permalink" "!=" .Permalink) }}
            <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
          {{ end }}
        </ul>
      {{ end }}
    {{ end }}
    <hr><center>
    {{ partial "repository-link.html" (dict "action" "edit" "page" .) }}
    {{ partial "repository-link.html" (dict "action" "view" "page" .) }}
    </center>
</article>
<hr>
{{ if ne .Type "page" }}
  <ul class="pager blog-pager">
    {{ if .PrevInSection }}
      <li class="previous">
        <a href="{{ .PrevInSection.Permalink }}" data-toggle="tooltip" data-placement="top" title="{{ .PrevInSection.Title }}">&larr; {{ i18n "previousPost" }}</a>
      </li>
    {{ end }}
    {{ if .NextInSection }}
      <li class="next">
        <a href="{{ .NextInSection.Permalink }}" data-toggle="tooltip" data-placement="top" title="{{ .NextInSection.Title }}">{{ i18n "nextPost" }} &rarr;</a>
      </li>
    {{ end }}
  </ul>
{{ end }}
<hr>
{{ partial "giscus.html" . }}
<hr>
{{ end }}